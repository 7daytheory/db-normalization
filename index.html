<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DB Normalization</title>
    <style>
    table {
      width: 60%;
      border-collapse: collapse;
      margin: 20px auto;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: center;
    }
    th {
      background-color: #f4f4f4;
    }
    </style>
</head>
<body>

<h1>Database Normalization</h1>
<h2>What is Database Normalization?</h2>   
<p>Database normalization is the process of organizing data in a relational database to reduce redundancy and improve data integrity. The goal is to divide large, complex tables into smaller, related tables and define relationships between them.</p>

<h2>Why Normalize?</h2>
<p>Normalization helps to eliminate data anomalies, ensures data consistency, and makes the database easier to maintain. It also improves query performance by reducing the amount of data that needs to be processed.</p>

<h2>(1NF) 1 Normal Forms</h2>
<code>Table with the list of the beatles - George, John, Ringo, Paul</code>
<p>You want them to display in order of their height.</p>
<ul>
    <li>If you use row order to show this you violate 1NF - you need to make another row (height) to convey this.</li>
    <li>Mixing data types within in a column is a violation(if you can even do it) ex: int column</li>
    <li>Add a primary key to table - Alter Table beatle_height ADD Primary Key (beatle_name)</li>
    <li>Storing a repeating group of data items on a single row violates 1NF - example: player_items (2 rings, 4 amulets, 18 coins, 3 shields) in one row. Instead create an item_type and use the player_id , item_name, item_quantity and you can store as many items as you need.</li>
</ul>

<h2>Table example</h2>
<h3 style="text-align: center;">Player Inventory</h3>
  <table>
    <thead>
      <tr>
        <th>player_id</th>
        <th>item_type</th>
        <th>item_quantity</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>amulets</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>rings</td>
        <td>2</td>
      </tr>
      <tr>
        <td>1</td>
        <td>coins</td>
        <td>18</td>
      </tr>
       <tr>
        <td>1</td>
        <td>shields</td>
        <td>3</td>
      </tr>
       <tr>
        <td>2</td>
        <td>coins</td>
        <td>30</td>
      </tr>
       <tr>
        <td>2</td>
        <td>rings</td>
        <td>3</td>
      </tr>
    </tbody>
  </table>

  <h2>(2NF) 2 Normal Forms</h2>
  <p>2NF requires that the table is in 1NF and that all non-key attributes are fully functionally dependent on the primary key. This means that no non-key attribute should depend on only part of a composite primary key.</p>
    <table>
        <thead>
        <tr>
            <th>player_id</th>
            <th>item_type</th>
            <th>item_quantity</th>
            <th>player_rating</th>
        </tr>
        </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>amulets</td>
        <td>4</td>
        <td>Advanced</td>
      </tr>
      <tr>
        <td>1</td>
        <td>rings</td>
        <td>2</td>
        <td>Advanced</td>
      </tr>
      <tr>
        <td>1</td>
        <td>coins</td>
        <td>18</td>
        <td>Advanced</td>
      </tr>
       <tr>
        <td>1</td>
        <td>shields</td>
        <td>3</td>
        <td>Advanced</td>
      </tr>
       <tr>
        <td>2</td>
        <td>coins</td>
        <td>30</td>
        <td>Beginner</td>
      </tr>
       <tr>
        <td>2</td>
        <td>rings</td>
        <td>3</td>
        <td>Beginner</td>
      </tr>
    </tbody>
  </table>
  <ul>
    <li>Deletion anomaly - loses items and remoes items but also removes player rating</li>
    <li>Update Anomaly - A player upgrades from beginner to advanced, but only one of the rows gets updated</li>
    <li>Insertion Anomaly - Need to show they a beginner but they have no items so it isn't shown</li>
    <li>Each non key attribute must depend on the entire primary key</li>
    <li>{player_id, item_type } -> {item_quantity} this works but the player_id -> player_rating does not</li>
    <li>Player would need it's own table , remove the player_rating and create a new player table, you can add more items like name, birthdate etc</li>
  </ul>
  <table>
        <thead>
        <tr>
            <th>player_id</th>
            <th>item_type</th>
            <th>item_quantity</th>
        </tr>
        </thead>
    <tbody>
     <tbody>
      <tr>
        <td>1</td>
        <td>amulets</td>
        <td>4</td>
      </tr>
      <tr>
        <td>1</td>
        <td>rings</td>
        <td>2</td>
      </tr>
      <tr>
        <td>1</td>
        <td>coins</td>
        <td>18</td>
      </tr>
       <tr>
        <td>1</td>
        <td>shields</td>
        <td>3</td>
      </tr>
       <tr>
        <td>2</td>
        <td>coins</td>
        <td>30</td>
      </tr>
       <tr>
        <td>2</td>
        <td>rings</td>
        <td>3</td>
      </tr>
    </tbody>
  </table>
  <table>
        <thead>
        <tr>
            <th>player_id</th>
            <th>player_rating</th>
        </tr>
        </thead>
    <tbody>
     <tbody>
      <tr>
        <td>1</td>
        <td>advanced</td>
      </tr>
      <tr>
        <td>2</td>
        <td>beginner</td>
      </tr>
    </tbody>
  </table>

  <h2>(3NF) 3 Normal Forms</h2>
  <p>3NF requires that the table is in 2NF and that all non-key attributes are not only fully functionally dependent on the primary key but also independent of each other. This means that no non-key attribute should depend on another non-key attribute.</p>
  <p>Skill Level - 1 2 3 Beginner - 4 5 6 Intermediate - 7 8 9 Advanced</p>
  <p>Transitive Dependency - {player_id} -> {player_skill_level} -> {player_rating} , a value is dependant on a non primary key value</p>

    <table>
        <thead>
            <tr>
                <th>player_id</th>
                <th>player_rating</th>
                <th>player_skill_level</th>
            </tr>
            </thead>
             <tbody>
      <tr>
        <td>1</td>
        <td>beginner</td>
        <td>4</td>
      </tr>
      <tr>
        <td>2</td>
        <td>beginner</td>
        <td>2</td>
      </tr>
      <tr>
        <td>3</td>
        <td>advanced</td>
        <td>8</td>
      </tr>
      <tr>
        <td>4</td>
        <td>beginner</td>
        <td>1</td>
      </tr>
    </tbody>
    </table>

   <p>Player 1 has a rating of 4 but a skill level of beginner - To resolve this, we can create a separate table for player ratings and skill levels.</p>
   <p>Every attribute in the table should depend on the key, the table above is not</p>
   <p>Boyce-Codd Normal Form: Every attribute in a table should depend on the key, the whole key, and nothing but the key.</p>
    <br>
   <p>To achieve 3NF, we can create a new table for player skill levels and link it to the player ratings.</p>
   <table>
        <thead>
            <tr>
                <th>player_rating</th>
                <th>player_skill_level</th>
            </tr>
            </thead>
             <tbody>
      <tr>
        <td>1</td>
        <td>beginner</td>
      </tr>
      <tr>
        <td>2</td>
        <td>beginner</td>
      </tr>
      <tr>
        <td>3</td>
        <td>beginner</td>
        <td>8</td>
      </tr>
      <tr>
        <td>4</td>
        <td>intermediate</td>
      </tr>
       <tr>
        <td>5</td>
        <td>intermediate</td>
      </tr>
       <tr>
        <td>6</td>
        <td>intermediate</td>
      </tr>
       <tr>
        <td>7</td>
        <td>advanced</td>
      </tr>
       <tr>
        <td>8</td>
        <td>advanced</td>
      </tr>
       <tr>
        <td>9</td>
        <td>advanced</td>
      </tr>
    </tbody>
    </table>

   <h3>At this point you have FULLY normalized your table!</h3>


</body>
</html>